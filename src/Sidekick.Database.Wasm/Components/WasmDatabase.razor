@using Microsoft.JSInterop

@implements IDisposable
@inject IJSRuntime JsRuntime

@code {

    private IJSObjectReference? Module { get; set; }

    protected override async Task OnInitializedAsync()
    {
        Module = await JsRuntime.InvokeAsync<IJSObjectReference>("import", "./dbstorage.js");
        await Module.InvokeVoidAsync("synchronizeFileWithIndexedDb", "Sidekick.db");
    }

    public void Dispose()
    {
        if (Module == null) return;
        Module.DisposeAsync();
    }
}
